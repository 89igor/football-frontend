{"ast":null,"code":"import { switchMap, takeUntil } from \"rxjs\";\nimport { ResultEnum } from \"../../../../shared/interfaces/fixtures.interface\";\nimport { FilterLeagueDirective } from \"../../../../shared/directive/filterLeague.directive\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../shared/services/league.service\";\nimport * as i2 from \"../../../../shared/components/result-table/result-table.component\";\nexport let LeagueResultsComponent = /*#__PURE__*/(() => {\n  class LeagueResultsComponent extends FilterLeagueDirective {\n    constructor(leagueService) {\n      super(leagueService);\n      this.leagueService = leagueService;\n      this.results = [];\n    }\n\n    getData() {\n      this.subject$.asObservable().pipe(switchMap(() => this.leagueService.getFixtures(this.count, this.page, this.leagueService.league.id, this.curSeason, ResultEnum.RESULT)), takeUntil(this.subscription)).subscribe(res => {\n        const fixtures = res.data.filter(fixture => new Date(`${fixture.dateStart} UTC`) < new Date());\n\n        if (this.page === 1) {\n          this.results = [];\n        }\n\n        this.page = res === null || res === void 0 ? void 0 : res.page;\n        this.lastLength = this.results.length;\n        this.results = this.results.concat(fixtures).sort((a, b) => new Date(b.dateStart).getTime() - new Date(a.dateStart).getTime());\n        this.loaderState = {\n          val: false\n        };\n      }, () => this.loaderState = {\n        val: false\n      });\n    }\n\n  }\n\n  LeagueResultsComponent.ɵfac = function LeagueResultsComponent_Factory(t) {\n    return new (t || LeagueResultsComponent)(i0.ɵɵdirectiveInject(i1.LeagueService));\n  };\n\n  LeagueResultsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LeagueResultsComponent,\n    selectors: [[\"app-league-results\"]],\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 1,\n    vars: 7,\n    consts: [[3, \"title\", \"seasons\", \"hasLeague\", \"seasonId\", \"loaderState\", \"lastLength\", \"results\", \"selectedSeason\", \"getMore\"]],\n    template: function LeagueResultsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-result-table\", 0);\n        i0.ɵɵlistener(\"selectedSeason\", function LeagueResultsComponent_Template_app_result_table_selectedSeason_0_listener($event) {\n          return ctx.selectSeason($event);\n        })(\"getMore\", function LeagueResultsComponent_Template_app_result_table_getMore_0_listener() {\n          return ctx.more();\n        });\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"title\", ctx.title)(\"seasons\", ctx.seasons)(\"hasLeague\", false)(\"seasonId\", ctx.curSeason)(\"loaderState\", ctx.loaderState)(\"lastLength\", ctx.lastLength)(\"results\", ctx.results);\n      }\n    },\n    directives: [i2.ResultTableComponent],\n    styles: [\"app-header-component[_ngcontent-%COMP%]{margin-bottom:14px}@media (max-width: 768px){app-header-component[_ngcontent-%COMP%]{margin-bottom:9px}}.date[_ngcontent-%COMP%]{line-height:1.2}.home-title[_ngcontent-%COMP%]{text-align:right;margin-right:31px}@media (max-width: 768px){.home-title[_ngcontent-%COMP%]{margin-right:4px}}.away-title[_ngcontent-%COMP%]{margin-left:20px}@media (max-width: 768px){.away-title[_ngcontent-%COMP%]{margin-right:4px}}@media (max-width: 768px){.table-grid[_ngcontent-%COMP%]{padding-bottom:4px}}\"]\n  });\n  return LeagueResultsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}