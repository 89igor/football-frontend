{"ast":null,"code":"import { ResultEnum } from \"../../interfaces/fixtures.interface\";\nimport { switchMap, takeUntil } from \"rxjs/operators\";\nimport { FilterDirective } from \"../../directive/filter.directive\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../services/team.service\";\nimport * as i2 from \"../result-table/result-table.component\";\nexport let ResultsComponent = /*#__PURE__*/(() => {\n  class ResultsComponent extends FilterDirective {\n    constructor(teamService) {\n      super(teamService);\n      this.teamService = teamService;\n      this.results = [];\n    }\n\n    getData() {\n      this.curSeason = new Date().getFullYear();\n      this.subject$.asObservable().pipe(switchMap(() => this.teamService.getFixtures(ResultEnum.RESULT, this.teamService.team.id, this.curLeague, this.curSeason, this.page)), takeUntil(this.subscription)).subscribe(res => {\n        if (this.page === 1) {\n          this.results = [];\n        }\n\n        this.lastLength = this.results.length;\n        this.results = this.results.concat(res.map(r => {\n          var _a, _b, _c, _d;\n\n          let className = '';\n\n          if (r.homeTeam.score !== undefined && r.awayTeam.score !== undefined) {\n            if (r.awayTeam.name.toLowerCase() === ((_a = this.title) === null || _a === void 0 ? void 0 : _a.toLowerCase()) && r.awayTeam.score > r.homeTeam.score || r.homeTeam.name.toLowerCase() === ((_b = this.title) === null || _b === void 0 ? void 0 : _b.toLowerCase()) && r.homeTeam.score > r.awayTeam.score) {\n              className = 'result-win';\n            } else if (r.awayTeam.name.toLowerCase() === ((_c = this.title) === null || _c === void 0 ? void 0 : _c.toLowerCase()) && r.awayTeam.score < r.homeTeam.score || r.homeTeam.name.toLowerCase() === ((_d = this.title) === null || _d === void 0 ? void 0 : _d.toLowerCase()) && r.homeTeam.score < r.awayTeam.score) {\n              className = 'result-lost';\n            } else {\n              className = 'result-draw';\n            }\n          }\n\n          return Object.assign(Object.assign({}, r), {\n            class: className\n          });\n        }));\n        this.loaderState = {\n          val: false\n        };\n      }, () => this.loaderState = {\n        val: false\n      });\n    }\n\n    getSeasons() {\n      var _a, _b, _c;\n\n      const l = (_a = this.leagues) === null || _a === void 0 ? void 0 : _a.find(l => l.leagueId === this.curLeague);\n      this.seasons = [];\n\n      if ((_b = l === null || l === void 0 ? void 0 : l.seasons) === null || _b === void 0 ? void 0 : _b.length) {\n        l.seasons.forEach(s => {\n          const years = s.seasonName.split('/');\n          years.forEach(y => {\n            if (!this.seasons.some(season => season.seasonName === y)) {\n              this.seasons.push({\n                seasonId: +y,\n                seasonName: y\n              });\n            }\n          });\n        });\n      }\n\n      if ((_c = this.seasons) === null || _c === void 0 ? void 0 : _c.length) {\n        const currentYear = this.seasons.find(s => s.seasonId === new Date().getFullYear());\n        this.curSeason = currentYear ? currentYear.seasonId : this.seasons[0].seasonId;\n      }\n    }\n\n  }\n\n  ResultsComponent.ɵfac = function ResultsComponent_Factory(t) {\n    return new (t || ResultsComponent)(i0.ɵɵdirectiveInject(i1.TeamService));\n  };\n\n  ResultsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: ResultsComponent,\n    selectors: [[\"app-results\"]],\n    inputs: {\n      title: \"title\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature],\n    decls: 1,\n    vars: 8,\n    consts: [[1, \"br20\", 3, \"title\", \"seasons\", \"leagues\", \"leagueId\", \"seasonId\", \"loaderState\", \"lastLength\", \"results\", \"selectedLeague\", \"selectedSeason\", \"getMore\"]],\n    template: function ResultsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"app-result-table\", 0);\n        i0.ɵɵlistener(\"selectedLeague\", function ResultsComponent_Template_app_result_table_selectedLeague_0_listener($event) {\n          return ctx.selectLeague($event);\n        })(\"selectedSeason\", function ResultsComponent_Template_app_result_table_selectedSeason_0_listener($event) {\n          return ctx.selectSeason($event);\n        })(\"getMore\", function ResultsComponent_Template_app_result_table_getMore_0_listener() {\n          return ctx.more();\n        });\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵproperty(\"title\", ctx.title)(\"seasons\", ctx.seasons)(\"leagues\", ctx.leagues)(\"leagueId\", ctx.curLeague)(\"seasonId\", ctx.curSeason)(\"loaderState\", ctx.loaderState)(\"lastLength\", ctx.lastLength)(\"results\", ctx.results);\n      }\n    },\n    directives: [i2.ResultTableComponent],\n    styles: [\".date[_ngcontent-%COMP%]{line-height:1.2}.home-title[_ngcontent-%COMP%]{text-align:right;margin-right:31px}@media (max-width: 768px){.home-title[_ngcontent-%COMP%]{margin-right:20px}}.away-title[_ngcontent-%COMP%]{margin-left:20px}.result[_ngcontent-%COMP%]{width:3px;height:23px;margin-right:23px}@media (max-width: 768px){.result[_ngcontent-%COMP%]{height:17px;width:2px;margin-right:12px}}.result-win[_ngcontent-%COMP%]{background:#7CBF7F}.result-draw[_ngcontent-%COMP%]{background:#e0d24f}.result-lost[_ngcontent-%COMP%]{background:#F25D45}.score[_ngcontent-%COMP%]{display:flex;margin-left:-19px;align-items:center}@media (max-width: 768px){.score[_ngcontent-%COMP%]{margin-left:-10px}}@media (max-width: 768px){.table-grid[_ngcontent-%COMP%]{padding-bottom:7px}}\"]\n  });\n  return ResultsComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}