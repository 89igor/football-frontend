{"ast":null,"code":"import { forkJoin } from \"rxjs\";\nimport { switchMap } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../../shared/services/h2h.service\";\nimport * as i3 from \"../../shared/services/team.service\";\nimport * as i4 from \"../../shared/services/leagueAndSeasons.service\";\nimport * as i5 from \"../../shared/services/league.service\";\nimport * as i6 from \"../../shared/services/live-events.service\";\nimport * as i7 from \"@angular/common\";\nimport * as i8 from \"../../shared/components/live/live.component\";\nimport * as i9 from \"../../shared/components/live-match-stat/live-match-stat.component\";\nimport * as i10 from \"../../shared/components/lineups/lineups.component\";\nimport * as i11 from \"../../shared/components/match-events/match-events.component\";\nimport * as i12 from \"../../shared/components/interesting-h2h/interesting-h2h.component\";\nimport * as i13 from \"../../shared/components/live-events/live-events.component\";\n\nfunction LiveComponent_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"app-live\", 6)(2, \"app-live-match-stat\", 6)(3, \"app-lineups\", 6)(4, \"app-match-events\", 6);\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matchData\", ctx_r0.matchData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matchData\", ctx_r0.matchData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matchData\", ctx_r0.matchData);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"matchData\", ctx_r0.matchData);\n  }\n}\n\nfunction LiveComponent_ng_template_4_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h1\", 8);\n    i0.ɵɵtext(2, \"Live not found!\");\n    i0.ɵɵelementEnd()();\n  }\n}\n\nfunction LiveComponent_ng_template_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵtemplate(0, LiveComponent_ng_template_4_div_0_Template, 3, 0, \"div\", 7);\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.loading);\n  }\n}\n\nvar MatchType = /*#__PURE__*/(() => {\n  (function (MatchType) {\n    MatchType[\"LIVE\"] = \"LIVE\";\n    MatchType[\"HT\"] = \"HT\";\n    MatchType[\"FT\"] = \"FT\";\n    MatchType[\"ET\"] = \"ET\";\n  })(MatchType || (MatchType = {}));\n\n  return MatchType;\n})();\nexport let LiveComponent = /*#__PURE__*/(() => {\n  class LiveComponent {\n    constructor(route, h2hService, _teamService, _leagueAndSeasonsService, leagueService, liveEventService) {\n      this.route = route;\n      this.h2hService = h2hService;\n      this._teamService = _teamService;\n      this._leagueAndSeasonsService = _leagueAndSeasonsService;\n      this.leagueService = leagueService;\n      this.liveEventService = liveEventService;\n      this.loading = false;\n      this.leagues = [];\n      this.live = false;\n      this.seasonIds = [];\n      this.firstTeamId = this.route.snapshot.params['firstTeamId'];\n      this.secondTeamId = this.route.snapshot.params['secondTeamId'];\n      this.seasons$ = this.leagueService.getSeason();\n    }\n\n    ngOnInit() {\n      forkJoin([this._teamService.getSecondaryInfo(this.firstTeamId), this._teamService.getSecondaryInfo(this.secondTeamId), this._leagueAndSeasonsService.getLeagueAndSeasons(this.firstTeamId), this._leagueAndSeasonsService.getLeagueAndSeasons(this.secondTeamId), this.h2hService.firstTeamRecentlyPlayed(this.firstTeamId, true), this.h2hService.firstTeamRecentlyPlayed(this.secondTeamId, true)]).subscribe(res => {\n        var _a, _b;\n\n        this.firstTeam = res[0];\n        this.secondTeam = res[1];\n        this.firstTeamForm = res[4];\n        this.secondTeamForm = res[5];\n        let leagueSeasons = (_a = res[2]) === null || _a === void 0 ? void 0 : _a.concat((_b = res[3]) === null || _b === void 0 ? void 0 : _b.filter(item => res[3].indexOf(item) < 0));\n        const season = leagueSeasons.map(l => l.seasons).map(s => s.map(item => item.seasonId));\n        this.seasonIds = [].concat.apply([], season);\n        this.leagues = leagueSeasons;\n\n        this._teamService.leagueSeasons.next(leagueSeasons);\n\n        this.curLeague = leagueSeasons[0].leagueId;\n        this.leagueService.search(leagueSeasons[0].leagueName).pipe(switchMap(res => {\n          this.leagueService.league = res;\n          return this.leagueService.seasonsOfLeague(res.id);\n        })).subscribe(res => {\n          var _a, _b;\n\n          if ((_b = (_a = this.leagueService) === null || _a === void 0 ? void 0 : _a.league) === null || _b === void 0 ? void 0 : _b.currentSeasonId) {\n            this.isCurrentLeague = true;\n          }\n\n          this.leagueService.seasons.next(res);\n        });\n        this.getLeagues();\n      });\n      this.loading = true;\n      this.h2hService.teamsH2h(this.firstTeamId, this.secondTeamId).subscribe(res => {\n        this.allMatches = res;\n      });\n      this.liveEventService.getFixtures(this.firstTeamId).subscribe(res => {\n        var _a, _b, _c, _d;\n\n        const liveEvents = res;\n        const match = liveEvents === null || liveEvents === void 0 ? void 0 : liveEvents.find(e => +e.localTeam.id === +this.firstTeamId && +e.visitorTeam.id === +this.secondTeamId || +e.localTeam.id === +this.secondTeamId && +e.visitorTeam.id === +this.firstTeamId);\n\n        if (((_a = match === null || match === void 0 ? void 0 : match.time) === null || _a === void 0 ? void 0 : _a.status) === MatchType.LIVE || ((_b = match === null || match === void 0 ? void 0 : match.time) === null || _b === void 0 ? void 0 : _b.status) === MatchType.ET || ((_c = match === null || match === void 0 ? void 0 : match.time) === null || _c === void 0 ? void 0 : _c.status) === MatchType.FT || ((_d = match === null || match === void 0 ? void 0 : match.time) === null || _d === void 0 ? void 0 : _d.status) === MatchType.HT && Object.keys(match).length !== 0) {\n          this.live = true;\n          this.matchData = match;\n        }\n      });\n    }\n\n    getLeagues() {\n      this.getSeasons();\n    }\n\n    getSeasons() {\n      var _a, _b;\n\n      const l = (_a = this.leagues) === null || _a === void 0 ? void 0 : _a.find(l => l.leagueId === this.curLeague);\n      this.curSeason = (_b = l === null || l === void 0 ? void 0 : l.seasons[0]) === null || _b === void 0 ? void 0 : _b.seasonId;\n    }\n\n  }\n\n  LiveComponent.ɵfac = function LiveComponent_Factory(t) {\n    return new (t || LiveComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.H2hService), i0.ɵɵdirectiveInject(i3.TeamService), i0.ɵɵdirectiveInject(i4.LeagueAndSeasonsService), i0.ɵɵdirectiveInject(i5.LeagueService), i0.ɵɵdirectiveInject(i6.LiveEventsService));\n  };\n\n  LiveComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: LiveComponent,\n    selectors: [[\"app-live-match-all\"]],\n    decls: 9,\n    vars: 2,\n    consts: [[1, \"container\", \"d-flex\"], [1, \"left\"], [4, \"ngIf\", \"ngIfElse\"], [\"liveEmpty\", \"\"], [1, \"right\"], [1, \"mb-30\"], [1, \"mb-40\", 3, \"matchData\"], [4, \"ngIf\"], [1, \"font-weight-bold\", \"text-center\"]],\n    template: function LiveComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"div\", 1);\n        i0.ɵɵtemplate(3, LiveComponent_ng_container_3_Template, 5, 4, \"ng-container\", 2);\n        i0.ɵɵtemplate(4, LiveComponent_ng_template_4_Template, 1, 1, \"ng-template\", null, 3, i0.ɵɵtemplateRefExtractor);\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(6, \"div\", 4);\n        i0.ɵɵelement(7, \"app-interesting-h2h\", 5)(8, \"app-live-events\");\n        i0.ɵɵelementEnd()();\n      }\n\n      if (rf & 2) {\n        const _r1 = i0.ɵɵreference(5);\n\n        i0.ɵɵadvance(3);\n        i0.ɵɵproperty(\"ngIf\", ctx.live)(\"ngIfElse\", _r1);\n      }\n    },\n    directives: [i7.NgIf, i8.LiveComponent, i9.LiveMatchStatComponent, i10.LineupsComponent, i11.MatchEventsComponent, i12.InterestingH2hComponent, i13.LiveEventsComponent],\n    styles: [\".right[_ngcontent-%COMP%], .left[_ngcontent-%COMP%]{display:flex;margin-top:20px;flex-direction:column}.right[_ngcontent-%COMP%]{max-width:360px;width:100%}@media (max-width: 768px){.right[_ngcontent-%COMP%]{display:none}}.left[_ngcontent-%COMP%]{margin-top:10px;flex:1}@media (max-width: 768px){.left[_ngcontent-%COMP%]{margin-top:16px}}.d-flex[_ngcontent-%COMP%]{gap:40px}\"]\n  });\n  return LiveComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}