{"ast":null,"code":"import { UnsubscribeDirective } from \"./unsubscribe.directive\";\nimport { Subject } from \"rxjs\";\nimport { takeUntil } from \"rxjs/operators\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/league.service\";\nexport let FilterLeagueDirective = /*#__PURE__*/(() => {\n  class FilterLeagueDirective extends UnsubscribeDirective {\n    constructor(leagueService) {\n      super();\n      this.leagueService = leagueService;\n      this.title = '';\n      this.label = '';\n      this.seasons = [];\n      this.loaderState = {\n        val: false\n      };\n      this.lastLength = 0;\n      this.subject$ = new Subject();\n      this.count = 10;\n      this.offset = 1;\n      this.page = 1;\n    }\n\n    ngOnInit() {\n      var _a;\n\n      this.curSeason = (_a = this.leagueService.league) === null || _a === void 0 ? void 0 : _a.currentSeasonId;\n      this.getSeasons();\n      this.getData();\n      this.callSubject();\n    }\n\n    getData() {}\n\n    selectSeason(id) {\n      this.curSeason = id;\n      this.setSeasonName();\n      this.offset = 1;\n      this.page = 1;\n      this.callSubject();\n    }\n\n    more() {\n      this.offset += this.count;\n      this.page += 1;\n      this.callSubject();\n    }\n\n    getSeasons() {\n      this.leagueService.seasons.pipe(takeUntil(this.subscription)).subscribe(res => {\n        this.seasons = res;\n        this.setSeasonName();\n      });\n    }\n\n    callSubject() {\n      this.subject$.next();\n    }\n\n    setSeasonName() {\n      const cSeason = this.seasons.find(s => s.seasonId === this.curSeason);\n      this.label = this.title + ' Table ' + (cSeason === null || cSeason === void 0 ? void 0 : cSeason.seasonName);\n    }\n\n  }\n\n  FilterLeagueDirective.ɵfac = function FilterLeagueDirective_Factory(t) {\n    return new (t || FilterLeagueDirective)(i0.ɵɵdirectiveInject(i1.LeagueService));\n  };\n\n  FilterLeagueDirective.ɵdir = /*@__PURE__*/i0.ɵɵdefineDirective({\n    type: FilterLeagueDirective,\n    selectors: [[\"\", \"appFilterLeague\", \"\"]],\n    inputs: {\n      title: \"title\"\n    },\n    features: [i0.ɵɵInheritDefinitionFeature]\n  });\n  return FilterLeagueDirective;\n})();","map":null,"metadata":{},"sourceType":"module"}